## 使用 windows 自带的 Certutil.exe 工具作为 base64 解码工具
## 使用 powershell 5.1(系统自带版) 作为编码工具
## 编码限制 (测试最大5G文件编码成功)
## 解码限制 小于 2.66GB 的 Base64 文件 ( 也就是编码前小于2GB的二进制文件 )

### 使用方法: 把要转码的文件拖放到.bat文件上面, 路径中不能有特殊符号.

# 特色功能: ( 以最新版为准 )
    1. 编码时可以分割文件, 生成分割大小 = 设定值 * 1.33 的 base64编码文件
    2. 解码时可以(并行解码+动态补位), 并行数量可调, 适应HDD or SSD环境.
    3. 解码完成后自动合并成原始的二进制文件.

更新日志:
    # v1 | 功能和 01_Base64_Certutil 内的脚本一样,  只是编码换成了 powershell 5.1 以支持大文件
    # v2 | 对v1性能做了优化
    # v3 | 在v2的基础上,  加入文件分割功能, 详情见脚本内注释, 可以设定每个分片的大小 (建议值2048M, 以兼容 Certutil 解码)
    # v4.0 | v3版本的基础上增加批量解码功能
    # v4.1 | 在v4.1的基础上,  增加了限制并行后台解码进程数量的功能
    # v4.2.0 | 4.2初版, 重写了脚本, 暂时去除了编码功能, 并行解码可以动态补位了
    # v4.2.1 | 重新添加了编码功能, 但解码有BUG无法结束循环
    # v4.2.2 | 修复了卡循环
    # v4.3.0 | 解码完可以自动合并文件了.
    # v4.3.1 | 只用拖拽一个文件即可完成编码或解码了.
    # v4.4 | 对脚本做了一些逻辑上的优化

性能测试:
    # 测试情况: (设备条件: 读写速度在500mb/s左右的垃圾sata SSD硬盘)
    # 对比参照: coreutils_base64_Conver SSD编码5G文件 18.45秒

    v1 SSD编码5G文件 57s
    v2 SSD编码5G文件 29s
    v2 SSD编码5G文件 bufferSize=33m fsBufSize=2m  27s
    v2 SSD编码5G文件 bufferSize=12m fsBufSize=1m  26s

    v3 SSD编码5G文件 分割块100mb=27s + Certutil单线程解码=72s + copy合并=11秒
    v4 SSD编码5G文件 分割块100mb=33s   4线程解码= 28.0s
    v4 SSD编码5G文件 分割块100mb=33s   4线程解码= 26.0s
    v4 SSD编码5G文件 分割块100mb=33s   8线程解码= 24.0s
    v4 SSD编码5G文件 分割块100mb=33s   999线程解码= 17s

    v4 HDD编码5G文件  分割块100mb=112s   1线程解码=106s
    v4 HDD编码5G文件  2线程解码=65.12s
    v4 HDD编码5G文件  3线程解码=51.73s
    v4 HDD编码5G文件  4线程解码=100s
    v4 HDD编码5G文件  4线程解码=55.28s
    v4 HDD编码5G文件  5线程解码=55.79s
    v4 HDD编码5G文件  5线程解码=55.79s

    v4.1 SSD 5G文件 编码,分割块100mb=38s   解码,异步5线程=22s
    v4.1 SSD 5G文件 编码,分割块100mb=38s   解码,异步5线程=25s

    v4.3.1 SSD 5G文件  编码, 分割块100mb=未测试  解码, 动态并行5线程+合并=38.5秒



